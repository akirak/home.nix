# -*- mode: gitconfig; -*-
[$HOME/home.nix]
checkout = git clone https://github.com/akirak/home.nix.git
update = git-safe-update --no-interactive --on-changed 'make home-manager'

[$HOME/.config/emacs]
checkout =
    cd $HOME/.config
    git clone https://github.com/akirak/emacs.d.git emacs
    nix-env -if .
update =
	git-safe-update --no-interactive \
	--on-changed 'nix-env -if . && cd straight && mr -c .mrconfig update'

[$HOME/commonplace]
checkout =
	git clone git@github.com:akirak/commonplace.git emacs
	cd commonplace
	nix-shell --run exit
	git annex init "commonplace on $(uname -n)"
	nix-desktop .
update =
	git-safe-update --no-interactive \
	--on-changed 'nix-desktop .'
